<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Foundry Agent Chat</title>
    <!-- Marked.js for Markdown rendering -->
    <script src="https://cdn.jsdelivr.net/npm/marked@14.1.2/marked.min.js"></script>
    <!-- Highlight.js for code syntax highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <!-- Custom styles -->
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="mcp-panel" id="mcpPanel">
        <span class="close-panel" onclick="toggleMcpPanel()">Ã—</span>
        <h3 style="margin-bottom: 15px;">ğŸ”Œ MCP Tools</h3>
        <div id="mcpToolsList">
            <p style="color: #999;">Loading available tools...</p>
        </div>
    </div>

    <div class="chat-container">
        <div class="chat-header">
            <div class="agent-selector">
                <button id="learnAgentBtn" class="agent-btn active" onclick="selectAgent('learn')" title="Uses Microsoft Learn MCP for documentation">
                    ğŸ“š Learn Agent (Self hosted)
                </button>
                <button id="travelAgentBtn" class="agent-btn" onclick="selectAgent('travel')"
                    title="Foundry-hosted Margies Travel Agent">
                    âœˆï¸ Travel Agent (Foundry hosted)
                </button>
            </div>
            <div class="header-title">
                ğŸ¤– Foundry Agent SDK
                <span class="agent-indicator" id="agentIndicator">Learn Agent</span>
            </div>
            <button id="mcpButton" onclick="toggleMcpPanel()">ğŸ”Œ MCP</button>
        </div>
        <div class="chat-messages" id="chatMessages">
            <div class="message agent">
                <div class="message-content">
                    <p>Hello! I'm your <strong>Microsoft Learn Agent</strong> powered by Azure AI Foundry. I can help you find Azure documentation, tutorials, and best practices.</p>
                    <p><strong>Try asking me:</strong></p>
                    <ul>
                        <li>What is Azure Functions?</li>
                        <li>How do I create a Cosmos DB account?</li>
                        <li>Explain Azure Container Apps deployment</li>
                        <li>What are the best practices for Azure security?</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="attached-files" id="attachedFiles" style="display: none;"></div>
        <div class="chat-input-container">
            <input type="file" id="fileInput" multiple accept=".txt,.pdf,.doc,.docx,.csv,.json,.md" />
            <button id="attachButton" title="Attach file">ğŸ“</button>
            <input type="text" id="messageInput" placeholder="Ask about Azure documentation, tutorials, or best practices..." autocomplete="off" />
            <button id="sendButton">Send</button>
        </div>
    </div>

    <!-- Custom script -->
    <script src="app.js"></script>
</body>

</html>